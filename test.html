<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
      }

      .document-content-card {
        border: 2px black solid;
        display: flex;
        justify-content: space-between;
        width: 90%;
        padding: 50px;
      }

      .document-content-card div {
        display: flex;
        gap: 20px;
      }

      #file-input {
        display: none; /* Hides the input field */
      }

      .choose-file-button {
        cursor: pointer;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
      }

      .choose-file-button:hover {
        background-color: #0056b3;
      }

      .replace-file-button {
        cursor: pointer;
        padding: 10px 20px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 16px;
      }

      .replace-file-button:hover {
        background-color: #218838;
      }
    </style>
  </head>
  <body>
    <div class="document-content-card">
      <p id="application-document-name">
        Filled out Scholarship Application Form with 1x1 picture (1 page only
        back-to-back)
      </p>
      <div>
        <!-- Visible button that triggers hidden file input -->
        <button class="choose-file-button" onclick="triggerFileInput()">
          Choose File
        </button>
        <!-- Hidden file input -->
        <input type="file" id="file-input" name="file" accept=".pdf" />
        <p class="application-file-status">Empty</p>
        <button class="replace-file-button" onclick="showReplacePopup()">
          Replace
        </button>
      </div>
    </div>

    <script>
      const fileInput = document.getElementById("file-input");
      const fileStatus = document.querySelector(".application-file-status");
      let uploadedFileURL = null; // To store the uploaded file URL

      // Function to trigger the hidden file input when the button is clicked
      function triggerFileInput() {
        fileInput.click();
      }

      // Updates the file status when a file is selected
      fileInput.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
          fileStatus.textContent = "Uploaded";

          // Create a blob URL for the uploaded file
          const blobURL = URL.createObjectURL(file);
          uploadedFileURL = blobURL; // Save the URL for viewing
        } else {
          fileStatus.textContent = "Empty";
          uploadedFileURL = null;
        }
      });

      // SweetAlert popup for the Replace button
      function showReplacePopup() {
        Swal.fire({
          title: "Replace File",
          text: "What would you like to do?",
          showDenyButton: true,
          showCancelButton: true,
          confirmButtonText: "View File",
          denyButtonText: "Delete File",
        }).then((result) => {
          if (result.isConfirmed) {
            if (uploadedFileURL) {
              Swal.fire({
                title: "View File",
                html: `
                  <iframe src="${uploadedFileURL}" 
                          style="width: 100%; height: 400px; border: none;"></iframe>
                `,
                width: "600px",
                showCloseButton: true,
              });
            } else {
              Swal.fire(
                "No file selected",
                "Please upload a file first.",
                "warning"
              );
            }
          } else if (result.isDenied) {
            fileInput.value = ""; // Reset file input
            fileStatus.textContent = "Empty";
            uploadedFileURL = null; // Clear the blob URL
            Swal.fire("Deleted!", "File has been removed.", "success");
          }
        });
      }
    </script>
  </body>
</html>
